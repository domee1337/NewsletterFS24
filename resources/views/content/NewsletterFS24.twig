{% set NewsletterUrl = config("NewsletterFS24.newsletter_url") %}
<script>

    $(document).ready( function(){

        var emailInput = $("#exampleInputEmail1");
        var emailBtn = $(".newsletter__btn-wrap").children();

        emailBtn.click( function(){
            var mail = emailInput.val();

            if (validateMail(mail)) {
                $.ajax({
                    url: "/newsletter_fs24/register/",
                    data: {
                        mail: mail
                    },
                    success: function(data){
                        data = JSON.parse(data);
                        if(data.valid)
                        {
                            alert("Newsletter wurde erfolgreich angefragt, bitte 端berpr端fe dein Posteingang.");
                            window.location = "/";
                        }
                        else
                        {
                            alert(data.error);
                            return false;                            
                        }
                    }
                })
            }
            else {
                alert('Bitte 端berpr端fe Deine eingegebene E-Mail');
                return false;
            }
            return false;
        });
    });

    function validateMail(mail) {
        var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

        if(filter.test(mail))
        {
            return true;
        }
        else
        {
            return false;
        }
    }
</script>